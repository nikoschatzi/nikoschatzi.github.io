<!-- <!DOCTYPE html> -->
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-PGZH8HT');</script>
  <!-- End Google Tag Manager -->

  <!-- Materialize - Compiled and minified CSS-->
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/materialize/0.95.3/css/materialize.min.css" />
  <!-- Font Awesome Icon - CSS-->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" />
  <!-- Custom Styles-->
  <link rel="stylesheet" href="/assets/css/style.css" />
  <title>Nikolaos Chatzipapas | Electronics Engineer</title>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-126939217-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-126939217-2');
  </script>

  <!-- Open Graph-->
  <meta property="og:locale" content="en_US" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Nikolaos Chatzipapas | Electronics Engineer" />
  <meta property="og:description" content="Electronics Engineer" />
  <meta property="og:url" content="https://nikoschatzi.github.io/" />
  <meta property="og:site_name" content="Nikolaos Chatzipapas | Electronics Engineer" />
  <meta property="article:publisher" content="https://nikoschatzi.github.io/" />
  <!-- Twitter -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@nikos_chatzipapas" />
  <meta name="twitter:title" content="Electronics Engineer | Embedded AI Passionate | Hardware Enthusiast" />
  <meta name="twitter:description" content="Electronics Engineer" />
  <meta name="author" content="Nikolaos Chatzipapas" />
  <meta name="description" content="Electronics Engineer" />
  <link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicon/apple-icon-57x57.png" />
  <link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicon/apple-icon-60x60.png" />
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicon/apple-icon-72x72.png" />
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicon/apple-icon-76x76.png" />
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicon/apple-icon-114x114.png" />
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicon/apple-icon-120x120.png" />
  <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicon/apple-icon-144x144.png" />
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicon/apple-icon-152x152.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicon/apple-icon-180x180.png" />
  <link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicon/android-icon-192x192.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicon/favicon-96x96.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon/favicon-16x16.png" />
  <link rel="manifest" href="/assets/img/favicon/manifest.json" />
  <meta name="msapplication-TileColor" content="#ffffff" />
  <meta name="msapplication-TileImage" content="/assets/img/favicon/ms-icon-144x144.png" />
  <meta name="theme-color" content="#ffffff" />
  <meta name="robots" content="index, follow" />
  <!-- Google Site Verification for indexing -->
  <meta name="google-site-verification" content="_qxK8tePiU2fhnwlwnJ7pkDFnj1k2EiKq_cYGy1Cb84" />


  <style>
    /* Fix for images overflowing */
    img {
      max-width: 100%;
      height: auto;
      display: block;
      margin: 0 auto; /* Center the image */
    }

    @media (max-width: 992px) {
  main {
    padding-left: 0px;
    padding-top: 0px;
  }
  ul.side-nav a {
    line-height: 100%;
    padding: 0;
    width: 100%;
  }
  nav {
    background: #fff;
    height: 64px;
    position: absolute;
  }
  nav a.button-collapse, nav a.button-collapse i {
    color: #009688;
    height: 56px;
    line-height: 56px;
  }
  h3 {
    padding: 20px 30px;
    margin-bottom: 40px;
  }
  .container {
    margin: 0 auto;
  }
  nav.hide-on-large.only.trigger {
    display: block;
    position: fixed;
    top: 0;
    z-index: 2;
  }
  .name-title {
    display: block;
    height: 100%;
    padding-top: 0px;
    text-align: center;
    width: 100%;
    position: absolute;
  }
  .name-title>span, .name-title>a {
    position: relative;
    line-height: 20px;
  }
  .name-title a {
    font-size: 22px;
    display: block;
  }
  .name-title span {
    display: block;
    font-size: 14px;
  }
  h3, .container {
    position: relative;
    top: 0px;
  }
  section#intro {
    margin-bottom: -64px;
  }
  .card .role {
    position: relative;
    right: initial;
    top: initial;
  }
}

    table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #4CAF50;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }

     @media screen and (max-width: 600px) {
            th, td {
                padding: 8px;
                font-size: 12px; /* Smaller font on very small screens */
            }
        }

    .equation {
            display: block;
            text-align: center;
            font-size: 1.2em;
            margin: 10px 0;
        }

  </style>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  
</head>

<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PGZH8HT"
  height="0" width="0" style="display:none;visibility:hidden"></iframe>
  </noscript>
  
  <!-- Navigation Menu-->
  <!-- Nav class 1 -->
  <nav class="hide-on-small-only">
    <ul class="side-nav fixed section table-of-contents">

        <!-- Navigation Menu-->
        <!-- Nav class 1 -->
        <nav class="hide-on-small-only">
          <ul class="side-nav fixed section table-of-contents">

      <li class="logo">
        <a id="logo-container" aria-label="Navigate to the beginning of the page"
          class="brand-logo grey-blue-text">
          <img src="/assets/img/passport-new.jpg" class="circle img-responsive profile-pic" alt="avatar">
        </a>
      </li>

      <li class="bold">
        <a  style="pointer-events: none; cursor: default; class="waves-effect waves-dark teal-text"><i
            class="mdi-action-trending-up small"></i><span><b>Projects</b></span></a>
      </li>

    </ul>
  </nav>
      

    </ul>
  </nav>

  <!-- Main Content-->
  <main>

    <section id="about" class="section scrollspy">
      <h3 class="page-title white-text teal">Wien Oscillation Circuit</h3>
      <div class="container flow-text">
        <!-- <blockquote>
        </blockquote> -->        
        <p>

      To support the use of AP10 valydine pressure sensor in cryogenics, design was needed to generate 5 kHz sinusoidal waveform with ±5V peak-to-peak output. 
      The design is specified to function in radiated environments.

          </p>
        <center>
        <figure>
        <img src="/assets/img/wien1.jpg" style="max-width:240px;width:100%" class="center" />
        <figcaption>AP10 valydine pressure sensor.</figcaption>
        </figure>
        </center>

        </p>

       <p>The Wien-bridge oscillator is a widely used configuration for generating low-frequency sine waves. It is favoured for its simplicity, stability, and minimal dependency on the specific characteristics of the operational amplifier used in the circuit. The oscillator operates based on the principle of a resistive-capacitive (RC) network, which determines the oscillation frequency.</p>

 </p>
        <center>
        <figure>
        <img src="/assets/img/wien2.png" style="max-width:600px;width:100%" class="center" />
        <figcaption>Wien oscillation circuit schematic.</figcaption>
        </figure>
        </center>

        </p>
        
        For sustained oscillation, the circuit must satisfy two conditions:
 <br>
          •	The total phase shift around the loop must be zero (or an integer multiple of 2π) <br>         
          •	The loop gain must be exactly unity. <br> <br>

The Wien-bridge network consists of two RC pairs:
<br>
        •	R1 and C1 introduce a phase shift in the signal. <br>
        •	R2 and C2 provide an opposing phase shift. <br>

<p>At a specific frequency, these phase shifts cancel out, ensuring that the net phase shift is zero. Additionally, the gain of the amplifier stage must be precisely three to counteract the attenuation introduced by the Wien-bridge network.
Wien Bridge Oscillator equations are: </p>
    
    <p><strong>1. Frequency of Oscillation:</strong></p>
    <p class="equation">\[ f = \frac{1}{2\pi R_4 C_1} = \frac{1}{2\pi R_2 C_2} \]</p>
    <p>This equation determines the oscillation frequency based on the resistor and capacitor values in the circuit.</p>
    
    <p><strong>2. Series Impedance (Z<sub>s</sub>):</strong></p>
    <p class="equation">\[ Z_s = \sqrt{R_1^2 + \frac{1}{(2\pi f C_1)^2}} \]</p>
    <p>This represents the impedance of the series combination of the resistor and capacitor.</p>
    
    <p><strong>3. Parallel Impedance (Z<sub>p</sub>):</strong></p>
    <p class="equation">\[ Z_p = \sqrt{\left(\frac{1}{R_2}\right)^2 + (2\pi f C_2)^2} \]</p>
    <p>This is the impedance of the parallel resistor and capacitor network.</p>
    
    <p><strong>4. Voltage Relationship:</strong></p>
    <p class="equation">\[ V_2 = \frac{V_{out}}{1 + \frac{Z_p}{Z_s}} \]</p>
    <p>If \( R_1 = R_2 \) and \( C_1 = C_2 \), then:</p>
    <p class="equation">\[ V_2 = \frac{V_{out}}{3} \]</p>
    <p>This means the voltage at that node is one-third of the output voltage.</p>
    
    <p><strong>5. Gain of the Oscillator:</strong></p>
    <p class="equation">\[ \text{Gain} = \frac{2Z_p + Z_s}{Z_p} \]</p>
    <p>This equation describes the gain required to sustain oscillations in the circuit.</p>
    
    <p><strong>6. Alternative Gain Expression:</strong></p>
    <p class="equation">\[ \text{Gain} = 1 + \frac{R_3}{R_4 + R_{DS}} \]</p>
    <p>This is another form of the gain equation, incorporating resistors that help control the oscillation conditions.</p>

<p>Despite its theoretical simplicity, practical implementation of the Wien-bridge oscillator presents several challenges:</p>
<ul>
    <li><strong>Component tolerances:</strong> Resistors can be manufactured with tight tolerances, but capacitors often exhibit significant variability, with tolerances as high as -20% to +80%. This affects both the oscillation frequency and gain stability.</li>
    <li><strong>Gain stability:</strong> If the amplifier gain is insufficient, oscillations will not start; if excessive, the output waveform becomes distorted.</li>
    <li><strong>Manual gain control:</strong> Traditional implementations require a variable resistor in the feedback path to fine-tune the gain, which increases complexity and introduces manufacturing inefficiencies.</li>
</ul>
        
<p>To address these issues, a Junction Field-Effect Transistor (JFET) can be introduced into the feedback loop to regulate the gain dynamically. This method eliminates the need for manual adjustments and enhances the circuit’s stability.</p>

<p><strong>Operating Principle of the JFET in the Wien-Bridge Oscillator:</strong></p>

    •	At startup, the JFET's gate voltage is zero, resulting in a low drain-source resistance. This increases the amplifier gain beyond the required threshold, ensuring that oscillations begin. <br>  
    •As the oscillations develop, the negative half-cycles of the output signal are rectified and applied as a control voltage to the JFET gate. This increases the JFET’s resistance, reducing the amplifier gain and stabilizing the oscillation amplitude.</li>
<br>•The circuit self-adjusts, maintaining oscillations without excessive distortion or over-amplification.<br> <br>

<p>The integration of a JFET for automatic gain control provides several key advantages:</p>
<ul>
    <li><strong>Elimination of Manual Adjustments:</strong> The circuit can achieve and maintain stable oscillations without requiring precise tuning of resistors.</li>
    <li><strong>Consistent Amplitude Control:</strong> The JFET dynamically regulates the gain, ensuring a stable output signal with minimal distortion.</li>
    <li><strong>Improved Reliability:</strong> The circuit automatically compensates for component tolerances, making it more robust in practical applications.</li>
</ul>

<p>A JFET (Junction Field-Effect Transistor) is a voltage-controlled semiconductor device that regulates current flow between the drain and source using an electric field. It has high input impedance and is commonly used in amplifiers, oscillators, and signal processing circuits.</p>

<p>For small drain-to-source voltages (V<sub>DS</sub>) around zero (e.g., ±25 mV), a JFET exhibits nearly symmetric resistance for positive and negative V<sub>DS</sub>. This means that whether V<sub>DS</sub> is slightly positive or slightly negative, the drain-to-source resistance (R<sub>DS</sub>) remains approximately the same. This behaviour occurs because, in the ohmic region, the JFET channel acts as a resistive element controlled by the gate-to-source voltage (V<sub>GS</sub>). Since the channel remains unsaturated at low V<sub>DS</sub>, current flow follows a nearly linear relationship, and the JFET functions similarly to a voltage-controlled resistor. While the resistance does change with V<sub>DS</sub>, the variation is minimal for small signals, making the JFET suitable for low-distortion applications such as amplitude stabilization in Wien-bridge oscillators.</p>

<p>At the beginning of the design phase, multiple JFETs were tested to evaluate how consistently their resistance remained for both positive and negative low V<sub>DS</sub> values. Among the tested devices, the 2N3819 exhibited the best performance, showing the most symmetrical resistance behaviour in this region. The goal was to select a steady-state operating point where R<sub>DS</sub> would be as high as possible. This approach minimizes the impact of resistor tolerances on circuit performance. However, increasing V<sub>GS</sub> (which results in a higher R<sub>DS</sub>) also leads to greater asymmetry between the positive and negative R<sub>DS</sub> values. Therefore, a compromise was necessary.</p>

<p>For this application, a V<sub>GS</sub> of -2.3V was chosen, as the 2N3819 provides a resistance of approximately 1 kOhm at this point. The operating point was set to ±25 mV with respect to V<sub>DS</sub>. Test results for the 2N3819 are shown in the following figures.</p>

</p>
       <table border="1">
    <tr>
        <th rowspan="2">Vgs (V)</th>
        <th colspan="3">Vds = ±25mV</th>
        <th colspan="3">Vds = ±50mV</th>
    </tr>
    <tr>
        <th>Rds Positive (Ω)</th>
        <th>Rds Negative (Ω)</th>
        <th>Deviation (%)</th>
        <th>Rds Positive (Ω)</th>
        <th>Rds Negative (Ω)</th>
        <th>Deviation (%)</th>
    </tr>
    <tr>
        <td>-2.5</td>
        <td>2618</td>
        <td>2170</td>
        <td>9.36%</td>
        <td>2789</td>
        <td>2027</td>
        <td>15.82%</td>
    </tr>
    <tr>
        <td>-2.25</td>
        <td>1533</td>
        <td>1350</td>
        <td>6.35%</td>
        <td>1603</td>
        <td>1288</td>
        <td>10.9%</td>
    </tr>
    <tr>
        <td>-2.0</td>
        <td>1058</td>
        <td>966</td>
        <td>4.55%</td>
        <td>1093</td>
        <td>935</td>
        <td>7.79%</td>
    </tr>
    <tr>
        <td>-1.75</td>
        <td>811</td>
        <td>759</td>
        <td>3.31%</td>
        <td>832</td>
        <td>744</td>
        <td>5.79%</td>
    </tr>
    <tr>
        <td>-1.5</td>
        <td>663</td>
        <td>629</td>
        <td>2.63%</td>
        <td>676</td>
        <td>618</td>
        <td>4.48%</td>
    </tr>
    <tr>
        <td>-1.25</td>
        <td>565</td>
        <td>554</td>
        <td>2.17%</td>
        <td>574</td>
        <td>532</td>
        <td>3.8%</td>
    </tr>
    <tr>
        <td>-1.0</td>
        <td>442</td>
        <td>427</td>
        <td>1.73%</td>
        <td>446</td>
        <td>422</td>
        <td>2.76%</td>
    </tr>
    <tr>
        <td>-0.75</td>
        <td>366</td>
        <td>357</td>
        <td>1.24%</td>
        <td>369</td>
        <td>353</td>
        <td>2.22%</td>
    </tr>
    <tr>
        <td>-0.5</td>
        <td>314</td>
        <td>307</td>
        <td>1.13%</td>
        <td>316</td>
        <td>305</td>
        <td>1.77%</td>
    </tr>
    <tr>
        <td>-0.25</td>
        <td>276</td>
        <td>271</td>
        <td>0.91%</td>
        <td>278</td>
        <td>267</td>
        <td>2.02%</td>
    </tr>
    <tr>
        <td>-0.1</td>
        <td>247</td>
        <td>242</td>
        <td>1.02%</td>
        <td>248</td>
        <td>241</td>
        <td>1.43%</td>
    </tr>
    <tr>
        <td>0</td>
        <td>158</td>
        <td>156</td>
        <td>0.64%</td>
        <td>158</td>
        <td>155</td>
        <td>0.96%</td>
    </tr>
</table>



        </p>
        The following figure depicts the circuit design, and the table contains the components were selected:

        </p>
        <center>
        <figure>
        <img src="/assets/img/wien2.png" style="max-width:600px;width:100%" class="center" />
        <figcaption>Wien oscillation circuit.</figcaption>
        </figure>
        </center>

        </p>

    <table>
        <tr>
            <th>Component</th>
            <th>Value/Description</th>
            <th>Part number(s)</th>
        </tr>
        <tr>
            <td>R1</td>
            <td>127K 0.1%</td>
            <td>603-RT0805BRD07127KL</td>
        </tr>
        <tr>
            <td>R2</td>
            <td>12K7 0.1%</td>
            <td>RN73C2A12K7BTDF</td>
        </tr>
        <tr>
            <td>R3</td>
            <td>200K 0.1%</td>
            <td>754-RG2012P-204-B-T5</td>
        </tr>
        <tr>
            <td>R4</td>
            <td>9K9 0.1%</td>
            <td>603-RT0805BRD079K09L</td>
        </tr>
        <tr>
            <td>R5</td>
            <td>5K2 0.1%</td>
            <td>RT0805BRD072K2L & ERA6ARB302V</td>
        </tr>
        <tr>
            <td>C1</td>
            <td>250 pF</td>
            <td>581-12061A251FAT2A</td>
        </tr>
        <tr>
            <td>C2</td>
            <td>2500 pF</td>
            <td>581-12061A152FAT2A & 581-12061A102F</td>
        </tr>
        <tr>
            <td>C3</td>
            <td>10 uF</td>
            <td>C1206C106K3PACTU</td>
        </tr>
        <tr>
            <td>D1</td>
            <td>Fast switching diode</td>
            <td>1N4448W</td>
        </tr>
        <tr>
            <td>D2</td>
            <td>Zener diode</td>
            <td>MMSZ5222</td>
        </tr>
        <tr>
            <td>IC1</td>
            <td>Operational Amplifier</td>
            <td>OPA602AU</td>
        </tr>
        <tr>
            <td>T1</td>
            <td>JFET</td>
            <td>2N3819</td>
        </tr>
    </table>
<br>
        The selected JFET operating point was: <br>
•	RDS ≈ 1 Kohm <br>
•	VDS ≈ ±25mV <br>
•	IDS ≈24 μA <br> <br>
A gain of 21 was used in the design.
For the feedback path, precise diode selection was critical, requiring a combination of a Zener diode and a 1N4448 diode. Since the voltage drop across a diode varies with current, laboratory testing was conducted to optimize circuit performance. These tests involved measuring the voltage drop across the 1N4448W diode under different current levels.
Similarly, the MMSZ5222B Zener diode, which has a rated voltage drop of 2.3V at 20mA as per the datasheet, was also characterized to ensure stable circuit operation.


        </p>
        <center>
        <figure>
        <img src="/assets/img/wien5.png" style="max-width:600px;width:100%" class="center" />
        <figcaption>1N4448W voltage drop plot.</figcaption>
        </figure>
        </center>

        </p>


        </p>
        <center>
        <figure>
        <img src="/assets/img/wien6.png" style="max-width:600px;width:100%" class="center" />
        <figcaption>MMSZ5222B voltage drop plot.</figcaption>
        </figure>
        </center>

        </p>

        After radiation testing, the circuit exhibited only minor voltage drift, even after exposure to doses reaching 1 kGy. This indicates that the design maintains stability and functionality, 
        demonstrating its robustness for the applications.

        </p>
        <center>
        <figure>
        <img src="/assets/img/wien7.png" style="max-width:600px;width:100%" class="center" />
        <figcaption>Radiation results.</figcaption>
        </figure>
        </center>

        </p>


       <table>
    <tr>
        <th></th>
        <th>0 Gy</th>
        <th>100 Gy</th>
        <th>600 Gy</th>
        <th>1000 Gy</th>
    </tr>
    <tr>
        <td>Positive peak (V)</td>
        <td>5.12</td>
        <td>5.04</td>
        <td>4.96</td>
        <td>4.8</td>
    </tr>
    <tr>
        <td>Negative peak (V)</td>
        <td>-4.96</td>
        <td>-5.04</td>
        <td>-5.12</td>
        <td>-5.18</td>
    </tr>
</table>


        
       
                
      </div>
    </section> 

  </main>


  <!-- jQuery-->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

  <!-- Materialize - Compiled and minified JavaScript-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.95.3/js/materialize.min.js"></script>
  <script>
    // Materialize - Initializers
    $(document).ready(function () {
      $(".scrollspy").scrollSpy()
      // Initialize collapse button
      $(".button-collapse").sideNav({
        menuWidth: 190, // Default is 240
        edge: "left", // Choose the horizontal origin
        closeOnClick: true // Closes side-nav on <a> clicks, useful for Angular/Meteor
      })
    })
  </script>
</body>

</html>
